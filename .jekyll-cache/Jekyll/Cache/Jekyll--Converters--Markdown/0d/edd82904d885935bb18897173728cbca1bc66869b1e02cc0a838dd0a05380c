I"]<blockquote>
  <p>zabbixâ€”ç¬¬3ç¯‡. â€</p>
</blockquote>

<p>åšnginxç›‘æ§ä¹‹å‰å…ˆææ˜ç™½nginx_statusï¼š
<img src="/img/nginx_status.png" alt="" /></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Activeconnections:å¯¹åç«¯å‘èµ·çš„æ´»åŠ¨è¿æ¥æ•°ï¼›

server accepts 76ï¼šnginx æ€»å…±å¤„ç†äº†76ä¸ªè¿æ¥ï¼›

handledï¼šæˆåŠŸåˆ›å»ºäº†76æ¬¡æ¡æ‰‹ï¼›

requestsï¼šæ€»å…±å¤„ç†äº†107è¯·æ±‚ã€‚

Readingï¼šnginxè¯»å–å®¢æˆ·ç«¯çš„headeræ•°ï¼›

Writing: nginx è¿”å›ç»™å®¢æˆ·ç«¯çš„headeræ•°ï¼›

Waiting: nginx è¯·æ±‚å¤„ç†å®Œæˆï¼Œæ­£åœ¨ç­‰å¾…ä¸‹ä¸€è¯·æ±‚æŒ‡ä»¤çš„è¿æ¥ã€‚

åœ¨è®¿é—®æ•ˆç‡å¾ˆé«˜ï¼Œè¯·æ±‚å¾ˆå¿«è¢«å¤„ç†å®Œæ¯•çš„æƒ…å†µä¸‹ï¼ŒWaiting æ•°æ¯”è¾ƒå¤šæ˜¯æ­£å¸¸çš„ã€‚å¦‚æœ reading + writing æ•°è¾ƒå¤šï¼Œåˆ™è¯´æ˜å¹¶å‘è®¿é—®é‡å¾ˆå¤§ï¼Œæ­£åœ¨å¤„ç†è¿‡ç¨‹ä¸­
</code></pre></div></div>

<p>zabbixç›‘æ§nginx3æ­¥æå®šã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.ä¿®æ”¹nginx.confé…ç½®æ–‡ä»¶å¹¶æµ‹è¯•

2.è‡ªå®šä¹‰ç›‘æ§é¡¹

3.å¯¼å…¥æ¨¡æ¿/è‡ªå·±å†™ä¹Ÿå¯ä»¥
</code></pre></div></div>

<h1 id="ä¿®æ”¹nginxconfæ–‡ä»¶å¹¶æµ‹è¯•">ä¿®æ”¹nginx.confæ–‡ä»¶å¹¶æµ‹è¯•</h1>
<p>åœ¨è¢«ç›‘æ§çš„ä¸»æœºä¸Šï¼Œé…ç½®nginx.confï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        location /nginx_status <span class="o">{</span>
          stub_status on<span class="p">;</span>
          access_log off<span class="p">;</span>
        <span class="o">}</span>
</code></pre></div></div>
<p><img src="/img/nginx_configèŠ‚ç‚¹ä¸Š.png" alt="" /></p>

<p>åŠ è½½nginxï¼šnginx -s reload</p>

<p>æµè§ˆå™¨è®¿é—®ï¼šhttps://IP/nginx_status
<img src="/img/nginx_status.png" alt="" /></p>

<h1 id="è‡ªå®šä¹‰ç›‘æ§é¡¹">è‡ªå®šä¹‰ç›‘æ§é¡¹</h1>
<p>åœ¨zabbixçš„agentèŠ‚ç‚¹ä¸Šï¼š</p>

<p>1.åœ¨/etc/zabbix/scriptsç›®å½•ä¸‹åˆ›å»ºè„šæœ¬ï¼šnginx_monitor.shï¼ˆè„šæœ¬æˆ‘æ”¾åœ¨æˆ‘githubçš„shellç›®å½•ä¸‹ï¼‰</p>

<p>èµ‹ä¸æ‰§è¡Œæƒé™ï¼šchmod +x nginx_monitor.sh</p>

<p>2.åœ¨/etc/zabbix/zabbix_agentd.d/ç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šnginx_monitor.conf</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UserParameter=nginx_status[*],/etc/zabbix/scripts/nginx_monitor.sh $1
</code></pre></div></div>

<p>3.é‡å¯agentï¼šsystemctl restart zabbix-agent</p>

<p>åœ¨zabbixçš„æœåŠ¡ç«¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[active]
1

[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[reading]
0

[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[writing]
1

[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[waiting]
0

[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[accepts]
76


[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[handled]
76

[root@zabbix-server cloudalert]#  zabbix_get -s 192.168.11.35 -k nginx_status[requests]
107
</code></pre></div></div>

<h1 id="å¯¼å…¥æ¨¡æ¿è‡ªå·±å†™ä¹Ÿå¯ä»¥">å¯¼å…¥æ¨¡æ¿/è‡ªå·±å†™ä¹Ÿå¯ä»¥</h1>
<p>åˆ›å»ºnginx statusæ¨¡æ¿ï¼š
<img src="/img/nginx_configåˆ›å»ºæ¨¡æ¿.png" alt="" /></p>

<p>åˆ›å»ºnginx statusç›‘æ§é¡¹ï¼š
<img src="/img/nginx_statusåˆ›å»ºç›‘æ§é¡¹.png" alt="" /></p>

<p>ç›‘æ§é¡¹å†…å®¹ï¼š
<img src="/img/nginx_statusç›‘æ§é¡¹å†…å®¹.png" alt="" />
æ ¹æ®nginx_monitor.shè„šæœ¬ï¼Œé‡Œé¢æœ‰7é¡¹å†…å®¹ã€‚ä¾æ¬¡å®Œæˆå¦‚ä¸‹é…ç½®ï¼š
<img src="/img/nginx_status7é¡¹ç›‘æ§é¡¹.png" alt="" /></p>

<p>é…ç½®ç›‘æ§é¡¹å›¾å½¢ï¼š
<img src="/img/nginx_statuså›¾å½¢.png" alt="" /></p>

<p>æ·»åŠ å®Œå›¾å½¢ä¹‹åï¼Œå°±ç®—å®Œæˆäº†ï¼Œå¯ä»¥å»æŸ¥çœ‹æ•°æ®ï¼Œåˆšæ·»åŠ å¥½ï¼Œéœ€è¦ç­‰å‡ åˆ†é’Ÿã€‚</p>

<p>æˆåŠŸæ•°æ®å¦‚ä¸‹ï¼š
<img src="/img/nginx_statusæˆåŠŸ.png" alt="" /></p>
:ET